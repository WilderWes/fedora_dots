#!/bin/sh
# per chatgpt I need to unset I3SOCK
unset I3SOCK
log="$HOME/.cache/autorandr.log"

case "$AUTORANDR_CURRENT_PROFILE" in
laptop) echo "Xft.dpi: 162" | xrdb -merge ;;
docked) echo "Xft.dpi: 96" | xrdb -merge ;;
*) echo "$(date): no dpi rule for $AUTORANDR_CURRENT_PROFILE" >>"$log" ;;
esac

if pgrep -x i3lock >/dev/null; then
    i3-msg reload
else
    i3-msg restart
fi

# firefox-dev via the4runner copr
if pgrep -x firefox-bin >/dev/null; then
    pkill -x firefox-bin
    i3-msg 'workspace 1; exec firefox-aurora'
fi

# other apps that need restarted
if pgrep -x dunst >/dev/null; then
    pkill -x dunst
    dunst &
fi

if pgrep -x 1password >/dev/null; then
    pkill -x 1password
fi
